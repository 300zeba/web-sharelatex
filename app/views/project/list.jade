extends ../layout

block scripts
	script(src=jsPath+'project-list.js')

block content
	#projectList

	script(type="text/javascript").
		window.data = {
			projects: !{projects},
			tags: !{tags}
		};

	script(type="text/x-handlebars", data-template-name="projects")
		- if (projects.length > 0)
			ul.list-unstyled.project-list
				li.container-fluid
					.row
						.col-md-6
							input(type="checkbox").select-all
							span.title TITLE
						.col-md-2
							span.owner OWNER
						.col-md-4
							span.last-modified LAST MODIFIED
				{{#each itemController="project"}}
				li.project_entry.container-fluid
					.row
						.col-md-6
							input(type="checkbox").select-item
							span.title
								<a class="projectName" {{ bind-attr href=url }}>{{name}}</a>
						.col-md-2
							span.owner {{ownerName}}
						.col-md-4
							span.last-modified.isoDate {{formattedLastUpdated}}
				{{/each}}
		- else
			.row
				.span12
					.welcome
						h1
							i.fa.fa-arrow-left
							| Welcome! Follow the arrow to get started
						p New to LaTeX? Start by having a look at our
							a(href="/templates")  templates
							|  or
							a(href="/learn")  help guides
							| .

	script(type="text/x-handlebars", data-template-name="tags")
		ul.list-unstyled.folders-menu.js-folders-menu
			li
				a.menu-indent(href="#") All projects
			li
				a.menu-indent(href="#") Your projects
			li
				a.menu-indent(href="#") Shared with you
			li 
				h2 Folders
			{{#each itemController="tag"}}
			li
				a.menu-indent(href="#")
					i.icon.fa.fa-folder-o
					|  {{name}}
				span.small ({{projectCount}})
			{{/each}}

	script(type="text/x-handlebars", data-template-name="application")
		.content.content-alt
			.container
				.row
					.col-md-2
						#newProject.dropdown
							a.btn.btn-primary.dropdown-toggle(data-toggle="dropdown", href="#") New Project
							ul.dropdown-menu(role="menu")
								li
									a#blankNewProject(href="#", data-csrf=csrfToken) Blank Project
								li
									a#newProjectExample(href="#", data-csrf=csrfToken) Example Project
								li
									a#uploadNewProject(href="#", data-csrf=csrfToken) Upload Project
								li.divider
								li.dropdown-header Templates
								li
									a.menu-indent(href="/templates/cv") CV or Resume
								li
									a.menu-indent(href="/templates/cover-letters") Cover Letter
								li
									a.menu-indent(href="/templates/journals") Journal Article
								li
									a.menu-indent(href="/templates/presentations") Presentation
								li
									a.menu-indent(href="/templates/thesis") Thesis
								li
									a.menu-indent(href="/templates/bibliographies") Bibliographies
								li
									a.menu-indent(href="/templates") View All »
						.row-spaced
							{{ render "tags" }}

						.row-spaced-small
							ul.list-unstyled.folders-menu
								li
									a.menu-indent(href="#")
										i.icon.fa.fa-plus
										|  New Folder

						-if (settings.enableSubscriptions)
							.row-spaced
								a(href="/user/bonus").btn.btn-info Upgrade Account

					.col-md-10
						.container-fluid
							.row
								.col-md-12
									form.project-search.form-horizontal(role="form")
										.form-group.has-feedback.col-md-7
											input(placeholder='Search projects…', autofocus='autofocus').form-control.col-md-7
											i.fa.fa-search.form-control-feedback
										//- i.fa.fa-remove

									.project-tools.js-toggle-tools
										.btn-toolbar
											.btn-group
												a.btn.btn-default(href='#', data-toggle="tooltip", data-placement="bottom", title="", data-original-title="Download")
													i.fa.fa-cloud-download
												a.btn.btn-default(href='#', data-toggle="tooltip", data-placement="bottom", title="", data-original-title="Delete")
													i.fa.fa-trash-o

											.btn-group
												a.btn.btn-default.dropdown-toggle(href="#", data-toggle="dropdown")
													i.fa.fa-folder-open-o
													|  
													span.caret
												ul.dropdown-menu.dropdown-menu-right(role="menu")
													li.dropdown-header Add to folder
													li
														a.menu-indent(href="#") PhD
													li
														a.menu-indent(href="#") Personal
													li
														a.menu-indent(href="#") Papers

											.btn-group
												a.btn.btn-default.dropdown-toggle(data-toggle="dropdown", href="#") More 
													span.caret
												ul.dropdown-menu.dropdown-menu-right(role="menu")
													li
														a(href='/project/'+"5369c5737fc6b47f048da1f5"+'/clone', data-csrf=csrfToken).cloneProject Make a Copy...
													-if ("owner" == "owner")
														li
															a(href='/project/'+"5369c5737fc6b47f048da1f5"+'/rename', data-name="the project", data-id="5369c5737fc6b47f048da1f5", data-csrf=csrfToken).renameProject Rename...
													-else
														li
															a(href='/project/'+"5369c5737fc6b47f048da1f5"+'/leave', data-name="the project", data-id="5369c5737fc6b47f048da1f5", data-csrf=csrfToken).leaveProject Leave Project
							.row.row-spaced
								.col-md-12
									.card.card-thin
										{{ render "projects" }}
